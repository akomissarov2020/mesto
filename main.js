(()=>{"use strict";class e{constructor(e,t,s,i,n,o,r){this._name=e.name,this._link=e.link,this._likes=e.likes.length,this._likesItems=e.likes,this._templateSelector=s,this._ownerId=t,this._cardOwnerId=e.owner._id,this._id=e._id,this._externalLikeHandler=n,this._externalDisikeHandler=o,this._handleCardClick=i,this._handleDeleteCard=r,this._openImageFunctionBunding=this._openImage.bind(this)}_deleteImage(e){this._handleDeleteCard(this._id,this)}deleteImage(){this._placeItem.remove(),this._placeItem=null}_toggleLike(e){e.target.classList.contains("elements__like_active")?this._externalDisikeHandler(this._id,this.setCardLikes.bind(this)):this._externalLikeHandler(this._id,this.setCardLikes.bind(this))}_openImage(e){this._handleCardClick(this._name,this._link)}_addEventListeners(){this._likeButton.addEventListener("click",this._toggleLike.bind(this)),this._placeItem.querySelector(".elements__trash-button").addEventListener("click",this._deleteImage.bind(this)),this._placeItem.querySelector(".elements__image").addEventListener("click",this._openImageFunctionBunding)}createPlace(){const e=document.querySelector(this._templateSelector).content;this._placeItem=e.querySelector(".elements__element").cloneNode(!0);const t=this._placeItem.querySelector(".elements__image"),s=this._placeItem.querySelector(".elements__text");return t.alt=this._name,t.src=this._link,s.textContent=this._name,this._likesElement=this._placeItem.querySelector(".elements__like-count"),this._likeButton=this._placeItem.querySelector(".elements__like"),this._removeButton=this._placeItem.querySelector(".elements__trash-button"),this.setCardLikes(this._likesItems),this._checkOwnLike(),this._checkMyCard(),this._addEventListeners(),this._placeItem}_checkOwnLike(){this._likesItems.some((e=>e._id===this._ownerId))?this._likeButton.classList.add("elements__like_active"):this._likeButton.classList.remove("elements__like_active")}setCardLikes(e){this._likesItems=e,this._likesElement.textContent=e.length,this._checkOwnLike()}_checkMyCard(){this._cardOwnerId!==this._ownerId&&this._hideRemoveButton()}_hideRemoveButton(){this._removeButton.classList.add("elements__trash-button_inactive")}}const t=document.querySelector(".profile__edit-button"),s=document.querySelector(".profile__add-button"),i=document.querySelector("[name='edit-profile-name']"),n=document.querySelector("[name='edit-profile-title']"),o=document.querySelector("[name='add-place']"),r=document.querySelector("[name='edit-profile']"),a=document.querySelector("[name='edit-avatar']"),h=document.querySelector(".profile__edit-avatar-button"),l={inputSelector:".form__field",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__save-button_inactive",inputErrorClass:"form__field_invalid"};class _{constructor(e){this._popup=document.querySelector(e)}open(){this._popup.classList.remove("popup_hidden"),this._popup.classList.add("popup_opened"),this._setEventListeners()}_closeWithoutSubmit(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-button"))&&this.close()}close(){this._popup.classList.remove("popup_opened"),this._removeEventListeners()}_handleEscClose(e){"Escape"===e.key&&this.close()}_setEventListeners(){this._onCloseBinding=this._closeWithoutSubmit.bind(this),this._onEscCloseBinding=this._handleEscClose.bind(this),this._popup.addEventListener("click",this._onCloseBinding),document.addEventListener("keydown",this._onEscCloseBinding)}_removeEventListeners(){this._popup.removeEventListener("click",this._onCloseBinding),document.removeEventListener("keydown",this._onEscCloseBinding)}}class c extends _{constructor(e,t,s){super(e),this._submitCallback=s,this._form=this._popup.querySelector(".form"),this._inputList=this._form.querySelectorAll(".form__field"),this._saveButton=this._form.querySelector(".form__save-button"),this._saveButtonDefaultText=this._saveButton.textContent,this._formValidator=t,this._formValidator.enableValidation()}open(){this._formValidator.toggleButtonState(),super.open()}_onSubmit(e){e.preventDefault(),this._setLoadingStatus("loading"),this._submitCallback(this._getInputValues()).then((e=>{this.close()})).catch((e=>{console.log(e),this._setLoadingStatus("error")})).finally((e=>{this._setLoadingStatus("default")}))}close(){this._form.reset(),this._formValidator.clearErrors(),this._setLoadingStatus("default"),super.close()}_setEventListeners(){this._onSubmitBinding=this._onSubmit.bind(this),this._form.addEventListener("submit",this._onSubmitBinding),super._setEventListeners()}_removeEventListeners(){this._form.removeEventListener("submit",this._onSubmitBinding),super._removeEventListeners()}_setLoadingStatus(e){this._saveButton.textContent="loading"===e?"Сохранение...":"default"===e?this._saveButtonDefaultText:"Ошибка"}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}}class u{constructor(e,t){this._formElement=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass}_showInputError(e,t){const s=this._formElement.querySelector(`.${e.name}-error`);e.classList.add(this._inputErrorClass),s.textContent=t}_hideInputError(e){const t=this._formElement.querySelector(`.${e.name}-error`);e.classList.remove(this._inputErrorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this.toggleButtonState(this._inputList,this._buttonElement),this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState(this._buttonElement)}))}))}clearErrors(){this._inputList.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._setEventListeners()}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}}function d(t){return new e(t,k,"#place",S.open.bind(S),m,p,v).createPlace()}function m(e,t){g.putLike(e).then((e=>{t(e.likes)})).catch((e=>{console.log(e)}))}function p(e,t){g.deleteLike(e).then((e=>{t(e.likes)})).catch((e=>{console.log(e)}))}function f(e){return new Promise((function(t,s){g.deletePhoto(e).then((e=>{t(e)})).catch((e=>{s(e)}))}))}function v(e,t){b.open(e,t,f)}let k=null;const g=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers={authorization:e.headers.authorization,"Content-Type":e.headers["Content-Type"]}}getInitialCards(){return fetch(`${this._baseUrl}cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}updateUserInfo(e){return fetch(`${this._baseUrl}users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.info})}).then(this._checkResponse)}insertNewCard(e){return fetch(`${this._baseUrl}cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}putLike(e){return fetch(`${this._baseUrl}cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}deleteLike(e){return fetch(`${this._baseUrl}cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateAvatar(e){return fetch(`${this._baseUrl}users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then(this._checkResponse)}deletePhoto(e){return fetch(`${this._baseUrl}cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-26/",headers:{authorization:"05e586ce-c0c8-4f14-bbd3-b259a470e2b4","Content-Type":"application/json"}}),L=new class{constructor({items:e,renderer:t},s){this._renderedItems=e,this._renderer=t,this._container=document.querySelector(s)}renderItems(e){this._clear(),this._renderedItems=e,this._renderedItems.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}_clear(){this._container.innerHTML=""}}({items:[],renderer:e=>{L.addItem(e)}},".elements");Promise.all([g.getUserInfo(),g.getInitialCards()]).then((([e,t])=>{E.setUserInfo(e),k=e._id;const s=[];t.forEach((e=>{const t=d(e);s.push(t)})),L.renderItems(s)})).catch((e=>{console.log(e)}));const S=new class extends _{constructor(e){super(e),this._popupTitle=this._popup.querySelector(".popup__image-text"),this._popupImage=this._popup.querySelector(".popup__image")}open(e,t){this._popupImage.src=t,this._popupImage.alt=e,this._popupTitle.textContent=e,super.open()}}(".popup_type_view"),b=new class extends _{constructor(e){super(e),this._form=this._popup.querySelector(".form"),this._deleteCardFunctionBunding=this._deleteCard.bind(this),this._saveButton=this._form.querySelector(".form__save-button"),this._saveButtonDefaultText=this._saveButton.textContent}open(e,t,s){super.open(),this._id=e,this._card=t,this._form.addEventListener("submit",this._deleteCardFunctionBunding),this._apiCallback=s}_deleteCard(e){e.preventDefault(),this._setLoadingStatus("loading"),this._apiCallback(this._id).then((e=>{this._card.deleteImage(),this.close()})).catch((e=>{console.log(e),this._setLoadingStatus("error")})).finally((e=>{this._setLoadingStatus("default")}))}_setLoadingStatus(e){this._saveButton.textContent="loading"===e?"Удаление...":"default"===e?this._saveButtonDefaultText:"Ошибка"}close(){super.close(),this._form.removeEventListener("submit",this._deleteCardFunctionBunding),this._setLoadingStatus("default")}}(".popup_type_with-confirm"),E=new class{constructor({nameSelector:e,infoSelector:t,avatarSelector:s}){this._name=document.querySelector(e),this._info=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent.trim(),info:this._info.textContent.trim()}}setUserInfo({name:e,about:t,avatar:s}){this._name.textContent=e,this._info.textContent=t,this._avatar.src=s}}({nameSelector:".profile__name",infoSelector:".profile__title",avatarSelector:".profile__avatar"}),I=new c(".popup_type_edit-profile",new u(l,r),(function(e){return new Promise((function(t,s){const i=e["edit-profile-name"],n=e["edit-profile-title"];g.updateUserInfo({name:i,info:n}).then((e=>{E.setUserInfo(e),t(e)})).catch((e=>{s(e)}))}))}));t.addEventListener("click",(function(e){const{name:t,info:s}=E.getUserInfo();i.value=t,n.value=s,I.open()}));const C=new c(".popup_type_add-place",new u(l,o),(function(e){return t={name:e["add-place-name"],link:e["add-place-link"]},new Promise((function(e,s){g.insertNewCard(t).then((t=>{const s=d(t);L.prependItem(s),e(t)})).catch((e=>{s(e)}))}));var t}));s.addEventListener("click",(function(e){C.open()}));const y=new c(".popup_type_edit-avatar",new u(l,a),(function(e){return new Promise((function(t,s){const i=e["avatar-link"];g.updateAvatar({link:i}).then((e=>{E.setUserInfo(e),t(e)})).catch((e=>{s(e)}))}))}));h.addEventListener("click",(function(e){y.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiaXRlbSIsIm93bmVySWQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwibGlrZSIsImRpc2xpa2UiLCJoYW5kbGVEZWxldGVDYXJkIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwibGVuZ3RoIiwiX2xpa2VzSXRlbXMiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9vd25lcklkIiwiX2NhcmRPd25lcklkIiwib3duZXIiLCJfaWQiLCJfZXh0ZXJuYWxMaWtlSGFuZGxlciIsIl9leHRlcm5hbERpc2lrZUhhbmRsZXIiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfb3BlbkltYWdlRnVuY3Rpb25CdW5kaW5nIiwiX29wZW5JbWFnZSIsImJpbmQiLCJfZGVsZXRlSW1hZ2UiLCJldnQiLCJkZWxldGVJbWFnZSIsIl9wbGFjZUl0ZW0iLCJyZW1vdmUiLCJfdG9nZ2xlTGlrZSIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwic2V0Q2FyZExpa2VzIiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsImNyZWF0ZVBsYWNlIiwicGxhY2VUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImltYWdlIiwidGV4dCIsImFsdCIsInNyYyIsInRleHRDb250ZW50IiwiX2xpa2VzRWxlbWVudCIsIl9yZW1vdmVCdXR0b24iLCJfY2hlY2tPd25MaWtlIiwiX2NoZWNrTXlDYXJkIiwic29tZSIsImFkZCIsIl9oaWRlUmVtb3ZlQnV0dG9uIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsIm5hbWVJbnB1dCIsInRpdGxlSW5wdXQiLCJhZGRQbGFjZUZvcm0iLCJlZGl0UHJvZmlsZUZvcm0iLCJlZGl0QXZhdGFyRm9ybSIsImF2YXRhckJ1dHRvbiIsImZvcm1TZXR0aW5ncyIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJvcGVuIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2Nsb3NlV2l0aG91dFN1Ym1pdCIsImNsb3NlIiwiX3JlbW92ZUV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZUVzY0Nsb3NlIiwia2V5IiwiX29uQ2xvc2VCaW5kaW5nIiwiX29uRXNjQ2xvc2VCaW5kaW5nIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtVmFsaWRhdG9yIiwic3VibWl0Q2FsbGJhY2siLCJzdXBlciIsIl9zdWJtaXRDYWxsYmFjayIsIl9mb3JtIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc2F2ZUJ1dHRvbiIsIl9zYXZlQnV0dG9uRGVmYXVsdFRleHQiLCJfZm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9vblN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwiX3NldExvYWRpbmdTdGF0dXMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJ0aGVuIiwicmVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsInJlc2V0IiwiY2xlYXJFcnJvcnMiLCJfb25TdWJtaXRCaW5kaW5nIiwic3RhdHVzIiwiX2Zvcm1WYWx1ZXMiLCJmb3JFYWNoIiwidmFsdWUiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybSIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIkFycmF5IiwiZnJvbSIsIl9idXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiY3JlYXRlQ2FyZCIsImRhdGEiLCJwb3B1cEltYWdlVmlldyIsImxpa2VIYW5kbGVyIiwiZGlzbGlrZUhhbmRsZXIiLCJpZCIsInVwZGF0ZUxpa2VzQ2FsbGJhY2siLCJhcGkiLCJwdXRMaWtlIiwiZGVsZXRlTGlrZSIsImRlbGV0ZUNhcmQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImRlbGV0ZVBob3RvIiwiY2FyZCIsInBvcHVwV2l0aENvbmZpcm0iLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiaGVhZGVycyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwibWV0aG9kIiwiX2NoZWNrUmVzcG9uc2UiLCJnZXRVc2VySW5mbyIsInVwZGF0ZVVzZXJJbmZvIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImluZm8iLCJpbnNlcnROZXdDYXJkIiwidXBkYXRlQXZhdGFyIiwiYXZhdGFyIiwib2siLCJqc29uIiwic2VjdGlvbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwicmVuZGVyZWRJdGVtcyIsIl9jbGVhciIsImFkZEl0ZW0iLCJhcHBlbmQiLCJwcmVwZW5kSXRlbSIsInByZXBlbmQiLCJpbm5lckhUTUwiLCJwbGFjZUl0ZW0iLCJhbGwiLCJ1c2VyRGF0YSIsImluaXRpYWxDYXJkcyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJwdXNoIiwiX3BvcHVwVGl0bGUiLCJfcG9wdXBJbWFnZSIsIl9kZWxldGVDYXJkRnVuY3Rpb25CdW5kaW5nIiwiX2RlbGV0ZUNhcmQiLCJhcGlDYWxsYmFjayIsIl9jYXJkIiwiX2FwaUNhbGxiYWNrIiwibmFtZVNlbGVjdG9yIiwiaW5mb1NlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfaW5mbyIsIl9hdmF0YXIiLCJ0cmltIiwicG9wdXBFZGl0UHJvZmlsZSIsInBvcHVwQWRkUGxhY2UiLCJwb3B1cEVkaXRBdmF0YXIiXSwibWFwcGluZ3MiOiJtQkFBZSxNQUFNQSxFQUNuQkMsWUFBWUMsRUFBTUMsRUFBU0MsRUFBa0JDLEVBQWlCQyxFQUFNQyxFQUFTQyxHQUMzRUMsS0FBS0MsTUFBUVIsRUFBS1MsS0FDbEJGLEtBQUtHLE1BQVFWLEVBQUtXLEtBQ2xCSixLQUFLSyxPQUFTWixFQUFLYSxNQUFNQyxPQUN6QlAsS0FBS1EsWUFBY2YsRUFBS2EsTUFDeEJO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LElBQ0osTUFBTXFELEVBQVl0RCxFQUFXQyxHQUM3QnNDLEVBQVFZLFlBQVlHLEdBQ3BCMUMsRUFBUVgsTUFFVGxDLE9BQU9DLElBQ042QyxFQUFPN0MsU0FUYixJQUFpQnpHLEtBNkZqQjRELEVBQVVwQixpQkFBaUIsU0FsSjNCLFNBQXNCWCxHQUNwQnVMLEVBQWN6SSxVQW1KaEIsTUFDTTBJLEVBQWtCLElBQUloSSxFSnpMSSwwQkl3TEEsSUFBSStCLEVBQWNqRCxFQUFjRixJQWpJaEUsU0FBMEJ5RSxHQUN4QixPQUFPLElBQUlVLFNBQVEsU0FBU0MsRUFBU0MsR0FDbkMsTUFBTTNJLEVBQU8rSCxFSnpDVSxlSTBDdkJNLEVBQUk0QixhQUFhLENBQUNqSyxLQUFNQSxJQUN2QjJGLE1BQU1DLElBQ0w0RixFQUFTQyxZQUFZN0YsR0FDckI4QyxFQUFROUMsTUFFVEMsT0FBT0MsSUFDTjZDLEVBQU83QyxZQTBIYnZDLEVBQWExQixpQkFBaUIsU0ExSjlCLFNBQXdCWCxHQUN0QndMLEVBQWdCMUksVyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoaXRlbSwgb3duZXJJZCwgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBsaWtlLCBkaXNsaWtlLCBoYW5kbGVEZWxldGVDYXJkKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gaXRlbS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGl0ZW0ubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gaXRlbS5saWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl9saWtlc0l0ZW1zID0gaXRlbS5saWtlcztcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IG93bmVySWQ7XHJcbiAgICB0aGlzLl9jYXJkT3duZXJJZCA9IGl0ZW0ub3duZXIuX2lkO1xyXG4gICAgdGhpcy5faWQgPSBpdGVtLl9pZDtcclxuICAgIC8vIGV4dGVybmFsIG1ldGhvZHNcclxuICAgIHRoaXMuX2V4dGVybmFsTGlrZUhhbmRsZXIgPSBsaWtlO1xyXG4gICAgdGhpcy5fZXh0ZXJuYWxEaXNpa2VIYW5kbGVyID0gZGlzbGlrZTtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQgPSBoYW5kbGVEZWxldGVDYXJkO1xyXG4gICAgdGhpcy5fb3BlbkltYWdlRnVuY3Rpb25CdW5kaW5nID0gdGhpcy5fb3BlbkltYWdlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBfZGVsZXRlSW1hZ2UoZXZ0KSB7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMuX2lkLCB0aGlzKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUltYWdlKCkge1xyXG4gICAgdGhpcy5fcGxhY2VJdGVtLnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fcGxhY2VJdGVtID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF90b2dnbGVMaWtlKGV2dCkge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbGVtZW50c19fbGlrZV9hY3RpdmUnKSkge1xyXG4gICAgICB0aGlzLl9leHRlcm5hbERpc2lrZUhhbmRsZXIodGhpcy5faWQsIHRoaXMuc2V0Q2FyZExpa2VzLmJpbmQodGhpcykpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZXh0ZXJuYWxMaWtlSGFuZGxlcih0aGlzLl9pZCwgdGhpcy5zZXRDYXJkTGlrZXMuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX29wZW5JbWFnZShldnQpIHtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICB9XHJcblxyXG4gIF9hZGRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX3RvZ2dsZUxpa2UuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl9wbGFjZUl0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdHJhc2gtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9kZWxldGVJbWFnZS5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuX3BsYWNlSXRlbS5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19pbWFnZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fb3BlbkltYWdlRnVuY3Rpb25CdW5kaW5nKTtcclxuICB9O1xyXG5cclxuICBjcmVhdGVQbGFjZSgpIHtcclxuICAgIGNvbnN0IHBsYWNlVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQ7XHJcbiAgICB0aGlzLl9wbGFjZUl0ZW0gPSBwbGFjZVRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2VsZW1lbnRcIikuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9wbGFjZUl0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faW1hZ2VcIik7XHJcbiAgICBjb25zdCB0ZXh0ID0gdGhpcy5fcGxhY2VJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RleHRcIik7XHJcbiAgICBpbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgaW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRleHQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fbGlrZXNFbGVtZW50ID0gdGhpcy5fcGxhY2VJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2xpa2UtY291bnRcIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fcGxhY2VJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlrZScpO1xyXG4gICAgdGhpcy5fcmVtb3ZlQnV0dG9uID0gdGhpcy5fcGxhY2VJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fdHJhc2gtYnV0dG9uJyk7XHJcbiAgICB0aGlzLnNldENhcmRMaWtlcyh0aGlzLl9saWtlc0l0ZW1zKTtcclxuICAgIHRoaXMuX2NoZWNrT3duTGlrZSgpO1xyXG4gICAgdGhpcy5fY2hlY2tNeUNhcmQoKTtcclxuICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fcGxhY2VJdGVtO1xyXG4gIH07XHJcblxyXG4gIF9jaGVja093bkxpa2UoKSB7XHJcbiAgICBjb25zdCBmb3VuZCA9IHRoaXMuX2xpa2VzSXRlbXMuc29tZShsaWtlID0+IGxpa2UuX2lkID09PSB0aGlzLl9vd25lcklkKTtcclxuICAgIGZvdW5kID8gdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdlbGVtZW50c19fbGlrZV9hY3RpdmUnKSA6IHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnZWxlbWVudHNfX2xpa2VfYWN0aXZlJyk7XHJcbiAgfVxyXG5cclxuXHJcbiAgc2V0Q2FyZExpa2VzKGxpa2VzKSB7XHJcbiAgICB0aGlzLl9saWtlc0l0ZW1zID0gbGlrZXM7XHJcbiAgICB0aGlzLl9saWtlc0VsZW1lbnQudGV4dENvbnRlbnQgPSBsaWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl9jaGVja093bkxpa2UoKTtcclxuICB9XHJcblxyXG4gIF9jaGVja015Q2FyZCgpIHtcclxuICAgIGlmICh0aGlzLl9jYXJkT3duZXJJZCAhPT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICB0aGlzLl9oaWRlUmVtb3ZlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGlkZVJlbW92ZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3JlbW92ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdlbGVtZW50c19fdHJhc2gtYnV0dG9uX2luYWN0aXZlJyk7XHJcbiAgfVxyXG59IiwiY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZU5hbWVTZWxlY3RvciA9IFwiLnByb2ZpbGVfX25hbWVcIjtcclxuY29uc3QgcHJvZmlsZVRpdGxlU2VsZWN0b3IgPSBcIi5wcm9maWxlX190aXRsZVwiO1xyXG5jb25zdCBwcm9maWxlQXZhdGFyU2VsZWN0b3IgPSBcIi5wcm9maWxlX19hdmF0YXJcIjtcclxuXHJcbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGVTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlXCI7XHJcbmNvbnN0IHBvcHVwQWRkUGxhY2VTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfYWRkLXBsYWNlXCI7XHJcbmNvbnN0IHBvcHVwSW1hZ2VWaWV3U2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX3ZpZXdcIjtcclxuY29uc3QgcG9wdXBFZGl0QXZhdGFyU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2VkaXQtYXZhdGFyXCI7XHJcbmNvbnN0IFBvcHVwV2l0aENvbmZpcm1TZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfd2l0aC1jb25maXJtXCI7XHJcblxyXG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2VkaXQtcHJvZmlsZS1uYW1lJ11cIik7XHJcbmNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2VkaXQtcHJvZmlsZS10aXRsZSddXCIpO1xyXG5cclxuXHJcbmNvbnN0IGFkZFBsYWNlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nYWRkLXBsYWNlJ11cIik7XHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nZWRpdC1wcm9maWxlJ11cIik7XHJcbmNvbnN0IGVkaXRBdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPSdlZGl0LWF2YXRhciddXCIpO1xyXG5cclxuY29uc3QgZWxlbWVudHNTZWxlY3RvciA9IFwiLmVsZW1lbnRzXCI7XHJcbmNvbnN0IG5hbWVGaWVsZE5hbWUgPSBcImVkaXQtcHJvZmlsZS1uYW1lXCI7XHJcbmNvbnN0IHRpdGxlRmllbGROYW1lID0gXCJlZGl0LXByb2ZpbGUtdGl0bGVcIjtcclxuY29uc3QgcGxhY2VOYW1lRmllbGROYW1lID0gXCJhZGQtcGxhY2UtbmFtZVwiO1xyXG5jb25zdCBwbGFjZUxpbmtGaWVsZE5hbWUgPSBcImFkZC1wbGFjZS1saW5rXCI7XHJcbmNvbnN0IGF2YXRhclVybEZpZWxkTmFtZSA9IFwiYXZhdGFyLWxpbmtcIjtcclxuXHJcbmNvbnN0IHBsYWNlVGVtcGxhdGVTZWxlY3RvciA9IFwiI3BsYWNlXCI7XHJcblxyXG5jb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYXZhdGFyLWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IGZvcm1TZXR0aW5ncyA9IHtcclxuICAgICAgICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2ZpZWxkJyxcclxuICAgICAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19zYXZlLWJ1dHRvbicsXHJcbiAgICAgICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ2Zvcm1fX3NhdmUtYnV0dG9uX2luYWN0aXZlJyxcclxuICAgICAgICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19maWVsZF9pbnZhbGlkJ1xyXG4gICAgICB9O1xyXG5cclxuZXhwb3J0IHtlZGl0QnV0dG9uLCBcclxuICAgICAgICBhZGRCdXR0b24sXHJcbiAgICAgICAgcGxhY2VUZW1wbGF0ZVNlbGVjdG9yLFxyXG4gICAgICAgIG5hbWVGaWVsZE5hbWUsXHJcbiAgICAgICAgdGl0bGVGaWVsZE5hbWUsXHJcbiAgICAgICAgcGxhY2VOYW1lRmllbGROYW1lLFxyXG4gICAgICAgIHBsYWNlTGlua0ZpZWxkTmFtZSxcclxuICAgICAgICBhdmF0YXJVcmxGaWVsZE5hbWUsXHJcbiAgICAgICAgcHJvZmlsZU5hbWVTZWxlY3RvcixcclxuICAgICAgICBwcm9maWxlVGl0bGVTZWxlY3RvcixcclxuICAgICAgICBwcm9maWxlQXZhdGFyU2VsZWN0b3IsXHJcbiAgICAgICAgYXZhdGFyQnV0dG9uLFxyXG4gICAgICAgIHBvcHVwRWRpdFByb2ZpbGVTZWxlY3RvcixcclxuICAgICAgICBwb3B1cEFkZFBsYWNlU2VsZWN0b3IsXHJcbiAgICAgICAgcG9wdXBJbWFnZVZpZXdTZWxlY3RvcixcclxuICAgICAgICBwb3B1cEVkaXRBdmF0YXJTZWxlY3RvcixcclxuICAgICAgICBQb3B1cFdpdGhDb25maXJtU2VsZWN0b3IsXHJcbiAgICAgICAgYWRkUGxhY2VGb3JtLFxyXG4gICAgICAgIGVkaXRQcm9maWxlRm9ybSxcclxuICAgICAgICBlZGl0QXZhdGFyRm9ybSxcclxuICAgICAgICBlbGVtZW50c1NlbGVjdG9yLFxyXG4gICAgICAgIG5hbWVJbnB1dCxcclxuICAgICAgICB0aXRsZUlucHV0LFxyXG4gICAgICAgIGZvcm1TZXR0aW5nc307IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX2hpZGRlblwiKTtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgX2Nsb3NlV2l0aG91dFN1Ym1pdChldnQpIHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpIHx8IFxyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1idXR0b25cIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fb25DbG9zZUJpbmRpbmcgPSB0aGlzLl9jbG9zZVdpdGhvdXRTdWJtaXQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX29uRXNjQ2xvc2VCaW5kaW5nID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbG9zZUJpbmRpbmcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX29uRXNjQ2xvc2VCaW5kaW5nKTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbG9zZUJpbmRpbmcpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX29uRXNjQ2xvc2VCaW5kaW5nKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGZvcm1WYWxpZGF0b3IsIHN1Ym1pdENhbGxiYWNrKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrID0gc3VibWl0Q2FsbGJhY2s7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19maWVsZFwiKTtcclxuICAgIHRoaXMuX3NhdmVCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fc2F2ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9zYXZlQnV0dG9uRGVmYXVsdFRleHQgPSB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50O1xyXG4gICAgdGhpcy5fZm9ybVZhbGlkYXRvciA9IGZvcm1WYWxpZGF0b3I7XHJcbiAgICB0aGlzLl9mb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG5cclxuICBfb25TdWJtaXQoZXZ0KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuX3NldExvYWRpbmdTdGF0dXMoXCJsb2FkaW5nXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSlcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgdGhpcy5fc2V0TG9hZGluZ1N0YXR1cyhcImVycm9yXCIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KHJlcyA9PiB7XHJcbiAgICAgIHRoaXMuX3NldExvYWRpbmdTdGF0dXMoXCJkZWZhdWx0XCIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIHRoaXMuX2Zvcm1WYWxpZGF0b3IuY2xlYXJFcnJvcnMoKTtcclxuICAgIHRoaXMuX3NldExvYWRpbmdTdGF0dXMoXCJkZWZhdWx0XCIpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX29uU3VibWl0QmluZGluZyA9IHRoaXMuX29uU3VibWl0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5fb25TdWJtaXRCaW5kaW5nKTtcclxuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX29uU3VibWl0QmluZGluZyk7XHJcbiAgICBzdXBlci5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIF9zZXRMb2FkaW5nU3RhdHVzKHN0YXR1cykge1xyXG4gICAgaWYgKHN0YXR1cyA9PT0gXCJsb2FkaW5nXCIpIHtcclxuICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIjtcclxuICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc2F2ZUJ1dHRvbkRlZmF1bHRUZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0J7RiNC40LHQutCwXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGZvcm1TZXR0aW5ncywgZm9ybSkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGZvcm1TZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBmb3JtU2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gZm9ybVNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBmb3JtU2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQubmFtZX0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQubmFtZX0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICB9O1xyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fYnV0dG9uRWxlbWVudCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGV2dCA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsZWFyRXJyb3JzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoaW5wdXRFbGVtZW50ID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZHMuanNcIjtcclxuaW1wb3J0IHtlZGl0QnV0dG9uLCBcclxuICAgICAgYWRkQnV0dG9uLFxyXG4gICAgICBwbGFjZVRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgICAgIG5hbWVGaWVsZE5hbWUsXHJcbiAgICAgIHRpdGxlRmllbGROYW1lLFxyXG4gICAgICBwbGFjZU5hbWVGaWVsZE5hbWUsXHJcbiAgICAgIHBsYWNlTGlua0ZpZWxkTmFtZSxcclxuICAgICAgYXZhdGFyVXJsRmllbGROYW1lLFxyXG4gICAgICBwcm9maWxlTmFtZVNlbGVjdG9yLFxyXG4gICAgICBwcm9maWxlVGl0bGVTZWxlY3RvcixcclxuICAgICAgcHJvZmlsZUF2YXRhclNlbGVjdG9yLFxyXG4gICAgICBhdmF0YXJCdXR0b24sXHJcbiAgICAgIHBvcHVwRWRpdFByb2ZpbGVTZWxlY3RvcixcclxuICAgICAgcG9wdXBBZGRQbGFjZVNlbGVjdG9yLFxyXG4gICAgICBwb3B1cEltYWdlVmlld1NlbGVjdG9yLFxyXG4gICAgICBwb3B1cEVkaXRBdmF0YXJTZWxlY3RvcixcclxuICAgICAgUG9wdXBXaXRoQ29uZmlybVNlbGVjdG9yLFxyXG4gICAgICBmb3JtU2V0dGluZ3MsXHJcbiAgICAgIGFkZFBsYWNlRm9ybSxcclxuICAgICAgZWRpdEF2YXRhckZvcm0sXHJcbiAgICAgIGVkaXRQcm9maWxlRm9ybSxcclxuICAgICAgZWxlbWVudHNTZWxlY3RvcixcclxuICAgICAgbmFtZUlucHV0LFxyXG4gICAgICB0aXRsZUlucHV0fSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5cclxuZnVuY3Rpb24gb3BlbkVkaXRQcm9maWxlKGV2dCkge1xyXG4gIGNvbnN0IHtuYW1lLCBpbmZvfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgbmFtZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICB0aXRsZUlucHV0LnZhbHVlID0gaW5mbztcclxuICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlbkVkaXRBdmF0YXIoZXZ0KSB7XHJcbiAgcG9wdXBFZGl0QXZhdGFyLm9wZW4oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlbkFkZFBsYWNlKGV2dCkge1xyXG4gIHBvcHVwQWRkUGxhY2Uub3BlbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRQcm9maWxlRWRpdChkYXRhKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgY29uc3QgbmFtZSA9IGRhdGFbbmFtZUZpZWxkTmFtZV07XHJcbiAgICBjb25zdCBpbmZvID0gZGF0YVt0aXRsZUZpZWxkTmFtZV07IFxyXG4gICAgYXBpLnVwZGF0ZVVzZXJJbmZvKHtuYW1lOiBuYW1lLCBpbmZvOiBpbmZvfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICAgICAgcmVzb2x2ZShyZXMpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIHJlamVjdChlcnIpXHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3VibWl0RWRpdEF2YXRhcihkYXRhKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgY29uc3QgbGluayA9IGRhdGFbYXZhdGFyVXJsRmllbGROYW1lXTtcclxuICAgIGFwaS51cGRhdGVBdmF0YXIoe2xpbms6IGxpbmt9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgICByZXNvbHZlKHJlcyk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgcmVqZWN0KGVycilcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRQbGFjZUFkZGluZyhkYXRhKSB7XHJcbiAgY29uc3QgaXRlbSA9IHtcclxuICAgICduYW1lJzogZGF0YVtwbGFjZU5hbWVGaWVsZE5hbWVdLFxyXG4gICAgJ2xpbmsnOiBkYXRhW3BsYWNlTGlua0ZpZWxkTmFtZV1cclxuICB9O1xyXG4gIHJldHVybiBhZGRDYXJkKGl0ZW0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgXHJcbiAgICBvd25lcklkLCBcclxuICAgIHBsYWNlVGVtcGxhdGVTZWxlY3RvciwgXHJcbiAgICBwb3B1cEltYWdlVmlldy5vcGVuLmJpbmQocG9wdXBJbWFnZVZpZXcpLFxyXG4gICAgbGlrZUhhbmRsZXIsIFxyXG4gICAgZGlzbGlrZUhhbmRsZXIsIFxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZCk7XHJcbiAgY29uc3QgcGxhY2VJdGVtID0gY2FyZC5jcmVhdGVQbGFjZSgpO1xyXG4gIHJldHVybiBwbGFjZUl0ZW07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZENhcmQoaXRlbSkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIGFwaS5pbnNlcnROZXdDYXJkKGl0ZW0pXHJcbiAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgY29uc3QgcGxhY2VJdGVtID0gY3JlYXRlQ2FyZChkYXRhKTtcclxuICAgICAgc2VjdGlvbi5wcmVwZW5kSXRlbShwbGFjZUl0ZW0pO1xyXG4gICAgICByZXNvbHZlKGRhdGEpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIHJlamVjdChlcnIpXHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbGlrZUhhbmRsZXIoaWQsIHVwZGF0ZUxpa2VzQ2FsbGJhY2spIHtcclxuICBhcGkucHV0TGlrZShpZClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICB1cGRhdGVMaWtlc0NhbGxiYWNrKHJlcy5saWtlcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGlzbGlrZUhhbmRsZXIoaWQsIHVwZGF0ZUxpa2VzQ2FsbGJhY2spIHtcclxuICBhcGkuZGVsZXRlTGlrZShpZClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICB1cGRhdGVMaWtlc0NhbGxiYWNrKHJlcy5saWtlcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlQ2FyZChpZCkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIGFwaS5kZWxldGVQaG90byhpZClcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmVzb2x2ZShyZXMpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIHJlamVjdChlcnIpXHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChpZCwgY2FyZCkge1xyXG4gIHBvcHVwV2l0aENvbmZpcm0ub3BlbihpZCwgY2FyZCwgZGVsZXRlQ2FyZCk7XHJcbn1cclxuXHJcblxyXG5sZXQgb3duZXJJZCA9IG51bGw7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0yNi8nLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICcwNWU1ODZjZS1jMGM4LTRmMTQtYmJkMy1iMjU5YTQ3MGUyYjQnLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gIH1cclxufSk7XHJcblxyXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oe2l0ZW1zOiBbXSwgcmVuZGVyZXI6IChwbGFjZUl0ZW0pPT57XHJcbiAgc2VjdGlvbi5hZGRJdGVtKHBsYWNlSXRlbSk7XHJcbn19LCBlbGVtZW50c1NlbGVjdG9yKTtcclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXHJcbi50aGVuKChbdXNlckRhdGEsIGluaXRpYWxDYXJkc10pID0+IHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgb3duZXJJZCA9IHVzZXJEYXRhLl9pZDtcclxuICBjb25zdCByZW5kZXJJdGVtcyA9IFtdO1xyXG4gIGluaXRpYWxDYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xyXG4gICAgY29uc3QgcGxhY2VJdGVtID0gY3JlYXRlQ2FyZChjYXJkKTtcclxuICAgIHJlbmRlckl0ZW1zLnB1c2gocGxhY2VJdGVtKTtcclxuICB9KTtcclxuICBzZWN0aW9uLnJlbmRlckl0ZW1zKHJlbmRlckl0ZW1zKTtcclxufSlcclxuLmNhdGNoKChlcnIpID0+IHtcclxuICBjb25zb2xlLmxvZyhlcnIpO1xyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwSW1hZ2VWaWV3ID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwSW1hZ2VWaWV3U2VsZWN0b3IpO1xyXG5jb25zdCBwb3B1cFdpdGhDb25maXJtID0gbmV3IFBvcHVwV2l0aENvbmZpcm0oUG9wdXBXaXRoQ29uZmlybVNlbGVjdG9yKTsgXHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7bmFtZVNlbGVjdG9yOiBwcm9maWxlTmFtZVNlbGVjdG9yLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9TZWxlY3RvcjogcHJvZmlsZVRpdGxlU2VsZWN0b3IsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZhdGFyU2VsZWN0b3I6IHByb2ZpbGVBdmF0YXJTZWxlY3Rvcn0pO1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvckVkaXRQcm9maWxlID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmdzLCBlZGl0UHJvZmlsZUZvcm0pO1xyXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yLCBmb3JtVmFsaWRhdG9yRWRpdFByb2ZpbGUsIHN1Ym1pdFByb2ZpbGVFZGl0KTtcclxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkVkaXRQcm9maWxlKTtcclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JBZGRQbGFjZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1TZXR0aW5ncywgYWRkUGxhY2VGb3JtKTtcclxuY29uc3QgcG9wdXBBZGRQbGFjZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQWRkUGxhY2VTZWxlY3RvciwgZm9ybVZhbGlkYXRvckFkZFBsYWNlLCBzdWJtaXRQbGFjZUFkZGluZyk7XHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkFkZFBsYWNlKTtcclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JFZGl0QXZhdGFyID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmdzLCBlZGl0QXZhdGFyRm9ybSk7XHJcbmNvbnN0IHBvcHVwRWRpdEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwRWRpdEF2YXRhclNlbGVjdG9yLCBmb3JtVmFsaWRhdG9yRWRpdEF2YXRhciwgc3VibWl0RWRpdEF2YXRhcik7XHJcbmF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkVkaXRBdmF0YXIpOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0ge1xyXG4gICAgICBhdXRob3JpemF0aW9uOiBvcHRpb25zLmhlYWRlcnMuYXV0aG9yaXphdGlvbixcclxuICAgICAgJ0NvbnRlbnQtVHlwZSc6IG9wdGlvbnMuaGVhZGVyc1snQ29udGVudC1UeXBlJ11cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH1jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH11c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpOyBcclxuICB9XHJcblxyXG4gIHVwZGF0ZVVzZXJJbmZvKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfXVzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGRhdGEuaW5mb1xyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgaW5zZXJ0TmV3Q2FyZChkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH1jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgbGluazogZGF0YS5saW5rXHJcbiAgICAgIH0pIFxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcHV0TGlrZShpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHMvbGlrZXMvJHtpZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUxpa2UoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzL2xpa2VzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUF2YXRhcihkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH11c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogZGF0YS5saW5rXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVQaG90byhpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgXHJcbiAgY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhyZW5kZXJlZEl0ZW1zKSB7XHJcbiAgICB0aGlzLl9jbGVhcigpO1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IHJlbmRlcmVkSXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChpdGVtKTtcclxuICB9XHJcblxyXG4gIHByZXBlbmRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgX2NsZWFyKCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuXHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cFRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtdGV4dFwiKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIFxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbiAgICB0aGlzLl9kZWxldGVDYXJkRnVuY3Rpb25CdW5kaW5nID0gdGhpcy5fZGVsZXRlQ2FyZC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fc2F2ZUJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zYXZlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX3NhdmVCdXR0b25EZWZhdWx0VGV4dCA9IHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBvcGVuKGlkLCBjYXJkLCBhcGlDYWxsYmFjaykge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5faWQgPSBpZDtcclxuICAgIHRoaXMuX2NhcmQgPSBjYXJkO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9kZWxldGVDYXJkRnVuY3Rpb25CdW5kaW5nKTtcclxuICAgIHRoaXMuX2FwaUNhbGxiYWNrID0gYXBpQ2FsbGJhY2s7XHJcbiAgfVxyXG5cclxuICBfZGVsZXRlQ2FyZChldnQpIHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3NldExvYWRpbmdTdGF0dXMoXCJsb2FkaW5nXCIpO1xyXG4gICAgICB0aGlzLl9hcGlDYWxsYmFjayh0aGlzLl9pZClcclxuICAgICAgLnRoZW4oKHJlcyk9PntcclxuICAgICAgICB0aGlzLl9jYXJkLmRlbGV0ZUltYWdlKCk7ICBcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKT0+e1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgdGhpcy5fc2V0TG9hZGluZ1N0YXR1cyhcImVycm9yXCIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseShyZXMgPT4ge1xyXG4gICAgICAgIHRoaXMuX3NldExvYWRpbmdTdGF0dXMoXCJkZWZhdWx0XCIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRMb2FkaW5nU3RhdHVzKHN0YXR1cykge1xyXG4gICAgaWYgKHN0YXR1cyA9PT0gXCJsb2FkaW5nXCIpIHtcclxuICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0KPQtNCw0LvQtdC90LjQtS4uLlwiO1xyXG4gICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IFwiZGVmYXVsdFwiKSB7XHJcbiAgICAgIHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zYXZlQnV0dG9uRGVmYXVsdFRleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCLQntGI0LjQsdC60LBcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5fZGVsZXRlQ2FyZEZ1bmN0aW9uQnVuZGluZyk7XHJcbiAgICB0aGlzLl9zZXRMb2FkaW5nU3RhdHVzKFwiZGVmYXVsdFwiKTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHtuYW1lU2VsZWN0b3IsIGluZm9TZWxlY3RvciwgYXZhdGFyU2VsZWN0b3J9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW5mb1NlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VyID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LnRyaW0oKSxcclxuICAgICAgaW5mbzogdGhpcy5faW5mby50ZXh0Q29udGVudC50cmltKClcclxuICAgIH07XHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHtuYW1lLCBhYm91dCwgYXZhdGFyfSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbmZvLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=